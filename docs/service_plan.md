# ğŸ¢ ì ‘ê·¼ì„± ë¶„ì„ ì„œë¹„ìŠ¤ - ìƒì„¸ ê¸°íšì„œ

## ëª©ì°¨
1. [ì„œë¹„ìŠ¤ ê°œìš”](#ì„œë¹„ìŠ¤-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ë°ì´í„° ë¶„ì„](#ë°ì´í„°-ë¶„ì„)
4. [ê¸°ëŠ¥ ëª…ì„¸](#ê¸°ëŠ¥-ëª…ì„¸)
5. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
6. [êµ¬í˜„ ê³„íš](#êµ¬í˜„-ê³„íš)
7. [ì‹œê°í™” ëŒ€ì‹œë³´ë“œ](#ì‹œê°í™”-ëŒ€ì‹œë³´ë“œ)
8. [ê³ ê¸‰ ê¸°ëŠ¥](#ê³ ê¸‰-ê¸°ëŠ¥)

---

## ì„œë¹„ìŠ¤ ê°œìš”

### ğŸ¯ ëª©ì 
ë§¤ì¥ ë‚´ë¶€ ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ **ì¥ì• ì¸ ë° íœ ì²´ì–´ ì‚¬ìš©ìë¥¼ ìœ„í•œ ì ‘ê·¼ì„± ì •ë³´**ë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤

### ğŸ” ë°°ê²½
í˜„ì¬ ë°ì´í„° êµ¬ì¡°:
- **Spider í´ë”**: í¬ë¡¤ë§ëœ ë§¤ì¥ ì´ë¯¸ì§€ê°€ ë°°ì¹˜ ë‹¨ìœ„ë¡œ ì €ì¥ (batch_00 ~ batch_10)
- **GT í´ë”**: 108ê°œ ì´ë¯¸ì§€ì˜ ì ‘ê·¼ì„± ë¶„ì„ ê²°ê³¼ê°€ JSONL í˜•ì‹ìœ¼ë¡œ ì €ì¥

### ğŸ’¡ í•µì‹¬ ê°€ì¹˜
1. **ìë™í™”**: ìˆ˜ì‘ì—… ë¶„ì„ â†’ GPT Vision API ìë™ ë¶„ì„
2. **í™•ì¥ì„±**: ë°°ì¹˜ ë‹¨ìœ„ ì²˜ë¦¬ë¡œ ëŒ€ëŸ‰ ì´ë¯¸ì§€ ì²˜ë¦¬ ê°€ëŠ¥
3. **ì‹œê°í™”**: ë¶„ì„ ê²°ê³¼ë¥¼ ì§ê´€ì ì¸ ëŒ€ì‹œë³´ë“œë¡œ ì œê³µ
4. **ì‹¤ìš©ì„±**: ì ‘ê·¼ì„± ì ìˆ˜ ë° ê°œì„  ì‚¬í•­ ì œì•ˆ

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         System Architecture                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Crawler     â”‚  ë§¤ì¥ ì´ë¯¸ì§€ í¬ë¡¤ë§
â”‚  (External)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INPUT: Spider Folder                          â”‚
â”‚  data/spider/                                                    â”‚
â”‚    â”œâ”€â”€ batch_00/  (5 images)                                    â”‚
â”‚    â”œâ”€â”€ batch_01/  (3 images)                                    â”‚
â”‚    â””â”€â”€ batch_XX/  ...                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              File Watcher (Monitoring Service)                   â”‚
â”‚  - Watchdog: spider í´ë” ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§                           â”‚
â”‚  - ìƒˆ ë°°ì¹˜ í´ë” ê°ì§€ ì‹œ ìë™ íŠ¸ë¦¬ê±°                                 â”‚
â”‚  - ì²˜ë¦¬ ì™„ë£Œëœ ë°°ì¹˜ ì¶”ì  (SQLite/JSON)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Batch Processor                                 â”‚
â”‚  1. ë°°ì¹˜ ì´ë¯¸ì§€ ìŠ¤ìº” ë° ê²€ì¦                                       â”‚
â”‚  2. ì´ë¯¸ì§€ ì „ì²˜ë¦¬ (ë¦¬ì‚¬ì´ì§•, í¬ë§· ë³€í™˜)                             â”‚
â”‚  3. GPT Vision Analyzer í˜¸ì¶œ                                     â”‚
â”‚  4. ì—ëŸ¬ í•¸ë“¤ë§ ë° ì¬ì‹œë„                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GPT-4 Vision API Analyzer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Prompt Template:                                   â”‚         â”‚
â”‚  â”‚ "ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ì—¬ ì ‘ê·¼ì„± ì •ë³´ ì¶”ì¶œ:                 â”‚         â”‚
â”‚  â”‚  1. has_step: ë‹¨ì°¨/ê³„ë‹¨ ìœ ë¬´                       â”‚         â”‚
â”‚  â”‚  2. width_class: í†µë¡œ ë„ˆë¹„                        â”‚         â”‚
â”‚  â”‚  3. chair: ì˜ì íƒ€ì…"                             â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  Response Schema:                                                â”‚
â”‚  {                                                               â”‚
â”‚    "has_step": boolean,                                          â”‚
â”‚    "width_class": ["wide" | "normal" | "narrow" | "not_passable"],â”‚
â”‚    "chair": {                                                    â”‚
â”‚      "has_movable_chair": boolean,                               â”‚
â”‚      "has_high_movable_chair": boolean,                          â”‚
â”‚      "has_fixed_chair": boolean,                                 â”‚
â”‚      "has_floor_chair": boolean                                  â”‚
â”‚    }                                                             â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Data Manager                                  â”‚
â”‚  1. ë¶„ì„ ê²°ê³¼ë¥¼ gt.jsonlì— ì¶”ê°€ (append mode)                     â”‚
â”‚  2. ì²˜ë¦¬ëœ ì´ë¯¸ì§€ë¥¼ gt/img_gt/ë¡œ ì´ë™                             â”‚
â”‚  3. ë°°ì¹˜ ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸                                       â”‚
â”‚  4. ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€ (file_path ì²´í¬)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  OUTPUT: GT Folder                               â”‚
â”‚  data/gt/                                                        â”‚
â”‚    â”œâ”€â”€ gt.jsonl         (ë¶„ì„ ê²°ê³¼ ë©”íƒ€ë°ì´í„°)                    â”‚
â”‚    â””â”€â”€ img_gt/          (ì²˜ë¦¬ëœ ì´ë¯¸ì§€ íŒŒì¼)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI Server                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ API Endpoints:                                     â”‚         â”‚
â”‚  â”‚  GET  /api/statistics                              â”‚         â”‚
â”‚  â”‚  GET  /api/batches                                 â”‚         â”‚
â”‚  â”‚  GET  /api/images?filter=has_step:false           â”‚         â”‚
â”‚  â”‚  POST /api/analyze (ìˆ˜ë™ íŠ¸ë¦¬ê±°)                    â”‚         â”‚
â”‚  â”‚  GET  /api/export/csv                              â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Visualization Dashboard (Next.js)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  ğŸ“Š í†µê³„ ì¹´ë“œ                                    â”‚            â”‚
â”‚  â”‚  ğŸ“ˆ ì°¨íŠ¸ (ë‹¨ì°¨, í†µë¡œ ë„ˆë¹„, ì˜ì íƒ€ì…)              â”‚            â”‚
â”‚  â”‚  ğŸ–¼ï¸  ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ (í•„í„°ë§)                      â”‚            â”‚
â”‚  â”‚  ğŸ“¦ ë°°ì¹˜ ì§„í–‰ë¥                                   â”‚            â”‚
â”‚  â”‚  ğŸ“„ ë¦¬í¬íŠ¸ ë‚´ë³´ë‚´ê¸°                              â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° í”Œë¡œìš°

```
Image File â†’ Preprocessing â†’ GPT Analysis â†’ Validation â†’ Storage â†’ Visualization
    â”‚            â”‚               â”‚              â”‚           â”‚           â”‚
  .webp      resize to       JSON response   schema     gt.jsonl   Dashboard
             1024px max                       check      + img_gt
```

---

## ë°ì´í„° ë¶„ì„

### í˜„ì¬ ë°ì´í„° ìƒíƒœ

#### Spider í´ë” êµ¬ì¡°
```
data/spider/
â”œâ”€â”€ batch_00/  (5 images)
â”‚   â”œâ”€â”€ 20240406121216_photo1_96fe98eaa714.webp
â”‚   â”œâ”€â”€ 20241103124712_photo2_e79f04f02f02.webp
â”‚   â”œâ”€â”€ 20241214072812938_photo_1a04d11682bc.webp
â”‚   â”œâ”€â”€ gold_20240317125953_photo4_8fa73bbfd2e7.webp
â”‚   â””â”€â”€ gold_20250427125847_photo1_9c87a02fd398.webp
â”œâ”€â”€ batch_01/  (3 images)
â”œâ”€â”€ batch_02/  (11 images)
â”œâ”€â”€ ...
â””â”€â”€ batch_10/  (6 images)
```

**íŒŒì¼ëª… íŒ¨í„´ ë¶„ì„:**
- `YYYYMMDDHHMMSS_[photo|menu]N_HASH.webp`
- `gold_` ì ‘ë‘ì‚¬: ê²€ì¦ëœ/ìš°ìˆ˜í•œ ìƒ˜í”Œ (í’ˆì§ˆ ë³´ì¦)

#### GT í´ë” ë¶„ì„

**gt.jsonl í†µê³„ (108ê°œ ìƒ˜í”Œ):**

```
ë‹¨ì°¨ ìœ ë¬´:
âœ… ë‹¨ì°¨ ì—†ìŒ: 65ê±´ (60.2%)
âŒ ë‹¨ì°¨ ìˆìŒ: 43ê±´ (39.8%)

í†µë¡œ ë„ˆë¹„ ë¶„í¬:
ğŸ“ Wide (ë„“ìŒ):        48ê±´ (44.4%)
ğŸ“ Normal (ë³´í†µ):      32ê±´ (29.6%)
ğŸ“ Narrow (ì¢ìŒ):      25ê±´ (23.1%)
ğŸš« Not Passable (í†µê³¼ë¶ˆê°€): 3ê±´ (2.8%)

ì˜ì íƒ€ì… ë¶„í¬:
ğŸª‘ ì´ë™í˜• ì˜ì:         89ê±´ (82.4%)
ğŸª‘ ë†’ì´ ì¡°ì ˆ ì˜ì:      31ê±´ (28.7%)
ğŸª‘ ê³ ì •í˜• ì˜ì:         42ê±´ (38.9%)
ğŸª‘ ë°”ë‹¥ ì¢Œì‹:          13ê±´ (12.0%)
```

### ì ‘ê·¼ì„± ì •ë³´ ìŠ¤í‚¤ë§ˆ

```json
{
  "file_path": "string",           // íŒŒì¼ëª…
  "has_step": boolean,             // ë‹¨ì°¨/ê³„ë‹¨ ìœ ë¬´
  "width_class": string[],         // í†µë¡œ ë„ˆë¹„ ë¶„ë¥˜ (ë°°ì—´)
  "chair": {
    "has_movable_chair": boolean,       // ì´ë™ ê°€ëŠ¥í•œ ì¼ë°˜ ì˜ì
    "has_high_movable_chair": boolean,  // íŒ”ê±¸ì´/ë†’ì´ ì¡°ì ˆ ì˜ì
    "has_fixed_chair": boolean,         // ê³ ì •ëœ ì˜ì (ë¶€ìŠ¤, ë²¤ì¹˜ ë“±)
    "has_floor_chair": boolean          // ë°”ë‹¥ ì¢Œì„ (ì¢Œì‹ í…Œì´ë¸”)
  },
  "timestamp": "ISO8601",          // ë¶„ì„ ì‹œê° (ì¶”ê°€ ì˜ˆì •)
  "batch_id": "string",            // ë°°ì¹˜ ID (ì¶”ê°€ ì˜ˆì •)
  "confidence": float              // ì‹ ë¢°ë„ (ì¶”ê°€ ì˜ˆì •)
}
```

---

## ê¸°ëŠ¥ ëª…ì„¸

### 1. ë°°ì¹˜ ì²˜ë¦¬ ì‹œìŠ¤í…œ

#### 1.1 File Watcher (ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§)
```python
# backend/processor/file_watcher.py

from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

class SpiderFolderHandler(FileSystemEventHandler):
    """Spider í´ë” ë³€ê²½ ê°ì§€"""
    
    def on_created(self, event):
        """ìƒˆ í´ë”/íŒŒì¼ ìƒì„± ê°ì§€"""
        if event.is_directory and event.src_path.startswith('batch_'):
            self.trigger_batch_processing(event.src_path)
    
    def trigger_batch_processing(self, batch_path):
        """ë°°ì¹˜ ì²˜ë¦¬ íŠ¸ë¦¬ê±°"""
        # ë°°ì¹˜ ì²˜ë¦¬ íì— ì¶”ê°€
        # ë˜ëŠ” ì¦‰ì‹œ ì²˜ë¦¬
        pass
```

**ê¸°ëŠ¥:**
- `data/spider/` í´ë” ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- ìƒˆ `batch_XX` í´ë” ìƒì„± ê°ì§€
- ìë™ ë°°ì¹˜ ì²˜ë¦¬ íŠ¸ë¦¬ê±°
- ì²˜ë¦¬ ì™„ë£Œëœ ë°°ì¹˜ ì¶”ì  (ì¤‘ë³µ ë°©ì§€)

#### 1.2 Batch Processor
```python
# backend/processor/batch_processor.py

class BatchProcessor:
    def process_batch(self, batch_dir: str):
        """ë°°ì¹˜ í´ë” ë‚´ ëª¨ë“  ì´ë¯¸ì§€ ì²˜ë¦¬"""
        
        # 1. ì´ë¯¸ì§€ íŒŒì¼ ìŠ¤ìº”
        images = self.scan_images(batch_dir)
        
        # 2. ê° ì´ë¯¸ì§€ ì²˜ë¦¬
        results = []
        for img_path in images:
            try:
                # ì „ì²˜ë¦¬
                processed_img = self.preprocess_image(img_path)
                
                # GPT Vision ë¶„ì„
                analysis = self.analyzer.analyze(processed_img)
                
                # ê²€ì¦
                validated = self.validate_result(analysis)
                
                results.append(validated)
                
            except Exception as e:
                self.logger.error(f"Failed to process {img_path}: {e}")
                self.retry_queue.add(img_path)
        
        # 3. ê²°ê³¼ ì €ì¥
        self.data_manager.save_results(results)
        
        # 4. ì´ë¯¸ì§€ ì´ë™
        self.data_manager.move_images(images)
        
        return results
```

**ê¸°ëŠ¥:**
- ì´ë¯¸ì§€ ìŠ¤ìº” ë° ê²€ì¦
- ì „ì²˜ë¦¬ (ë¦¬ì‚¬ì´ì§•, í¬ë§· ë³€í™˜)
- GPT Vision Analyzer í˜¸ì¶œ
- ì—ëŸ¬ í•¸ë“¤ë§ ë° ì¬ì‹œë„
- ì§„í–‰ë¥  ì¶”ì 

### 2. GPT Vision Analyzer

#### 2.1 í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
```python
# backend/analyzer/prompt_template.py

ACCESSIBILITY_ANALYSIS_PROMPT = """
ë‹¹ì‹ ì€ ì¥ì• ì¸ ì ‘ê·¼ì„± ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì œê³µëœ ë§¤ì¥ ë‚´ë¶€ ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ì—¬ 
íœ ì²´ì–´ ì‚¬ìš©ì ë° ê±°ë™ì´ ë¶ˆí¸í•œ ê³ ê°ì„ ìœ„í•œ ì ‘ê·¼ì„± ì •ë³´ë¥¼ ì¶”ì¶œí•´ì£¼ì„¸ìš”.

ë‹¤ìŒ í•­ëª©ì„ JSON í˜•ì‹ìœ¼ë¡œ ë¶„ì„í•´ì£¼ì„¸ìš”:

1. **ë‹¨ì°¨/ê³„ë‹¨ (has_step)**
   - ì…êµ¬ë‚˜ ë‚´ë¶€ì— ë‹¨ì°¨, ê³„ë‹¨ì´ ìˆëŠ”ì§€ í™•ì¸
   - ê²½ì‚¬ë¡œê°€ ìˆì–´ë„ ê³„ë‹¨ì´ ìˆìœ¼ë©´ true
   - boolean ê°’ìœ¼ë¡œ ì‘ë‹µ

2. **í†µë¡œ ë„ˆë¹„ (width_class)**
   - ì´ë¯¸ì§€ì—ì„œ ë³´ì´ëŠ” ëª¨ë“  í†µë¡œë¥¼ í‰ê°€
   - ì—¬ëŸ¬ í†µë¡œê°€ ìˆìœ¼ë©´ ë°°ì—´ë¡œ ë°˜í™˜
   - ë¶„ë¥˜ ê¸°ì¤€:
     * "wide": íœ ì²´ì–´ 2ëŒ€ ì´ìƒ ì—¬ìœ ë¡­ê²Œ í†µê³¼ ê°€ëŠ¥ (ì•½ 1.5m ì´ìƒ)
     * "normal": íœ ì²´ì–´ 1ëŒ€ê°€ ë¬´ë¦¬ì—†ì´ í†µê³¼ ê°€ëŠ¥ (ì•½ 0.9-1.5m)
     * "narrow": íœ ì²´ì–´ê°€ ê²¨ìš° í†µê³¼í•˜ê±°ë‚˜ ì–´ë ¤ì›€ (ì•½ 0.7-0.9m)
     * "not_passable": íœ ì²´ì–´ í†µê³¼ ë¶ˆê°€ëŠ¥ (0.7m ë¯¸ë§Œ ë˜ëŠ” ì¥ì• ë¬¼)

3. **ì˜ì íƒ€ì… (chair)**
   - ì—¬ëŸ¬ ì¢…ë¥˜ê°€ ìˆìœ¼ë©´ ëª¨ë‘ trueë¡œ í‘œì‹œ
   - has_movable_chair: ì´ë™ ê°€ëŠ¥í•œ ì¼ë°˜ ì˜ì/ìŠ¤íˆ´
   - has_high_movable_chair: íŒ”ê±¸ì´ê°€ ìˆê±°ë‚˜ ë†’ì´ ì¡°ì ˆ ê°€ëŠ¥í•œ ì˜ì
   - has_fixed_chair: ê³ ì •ëœ ì˜ì (ë¶€ìŠ¤ ì¢Œì„, ë²¤ì¹˜ ë“±)
   - has_floor_chair: ë°”ë‹¥ì— ì•‰ëŠ” ì¢Œì‹ ì¢Œì„

**ì¤‘ìš”:**
- ëª…í™•í•˜ì§€ ì•Šìœ¼ë©´ ë³´ìˆ˜ì ìœ¼ë¡œ í‰ê°€ (ì•ˆì „ì„± ìš°ì„ )
- ì´ë¯¸ì§€ì— ë³´ì´ì§€ ì•ŠëŠ” ì •ë³´ëŠ” ì¶”ì¸¡í•˜ì§€ ë§ˆì„¸ìš”
- JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”

ì‘ë‹µ í˜•ì‹:
{{
  "has_step": boolean,
  "width_class": ["wide" | "normal" | "narrow" | "not_passable"],
  "chair": {{
    "has_movable_chair": boolean,
    "has_high_movable_chair": boolean,
    "has_fixed_chair": boolean,
    "has_floor_chair": boolean
  }}
}}
"""
```

#### 2.2 Analyzer êµ¬í˜„
```python
# backend/analyzer/gpt_vision.py

from openai import OpenAI
import base64

class GPTVisionAnalyzer:
    def __init__(self, api_key: str):
        self.client = OpenAI(api_key=api_key)
        self.model = "gpt-4-vision-preview"
    
    def analyze(self, image_path: str) -> dict:
        """ì´ë¯¸ì§€ ì ‘ê·¼ì„± ë¶„ì„"""
        
        # ì´ë¯¸ì§€ë¥¼ base64ë¡œ ì¸ì½”ë”©
        with open(image_path, "rb") as image_file:
            base64_image = base64.b64encode(image_file.read()).decode('utf-8')
        
        # GPT Vision API í˜¸ì¶œ
        response = self.client.chat.completions.create(
            model=self.model,
            messages=[
                {
                    "role": "user",
                    "content": [
                        {
                            "type": "text",
                            "text": ACCESSIBILITY_ANALYSIS_PROMPT
                        },
                        {
                            "type": "image_url",
                            "image_url": {
                                "url": f"data:image/jpeg;base64,{base64_image}"
                            }
                        }
                    ]
                }
            ],
            max_tokens=500,
            temperature=0.2,  # ì¼ê´€ì„±ì„ ìœ„í•´ ë‚®ì€ temperature
        )
        
        # JSON íŒŒì‹±
        result = json.loads(response.choices[0].message.content)
        
        return result
```

### 3. Data Manager

```python
# backend/processor/data_manager.py

import json
import shutil
from pathlib import Path

class DataManager:
    def __init__(self, gt_path: str, img_gt_path: str):
        self.gt_jsonl = Path(gt_path) / "gt.jsonl"
        self.img_gt_dir = Path(img_gt_path)
        self.img_gt_dir.mkdir(parents=True, exist_ok=True)
    
    def save_results(self, results: list[dict]):
        """ë¶„ì„ ê²°ê³¼ë¥¼ gt.jsonlì— ì¶”ê°€"""
        
        # ê¸°ì¡´ íŒŒì¼ ê²½ë¡œ ë¡œë“œ (ì¤‘ë³µ ë°©ì§€)
        existing_paths = self.get_existing_paths()
        
        # ìƒˆ ê²°ê³¼ë§Œ ì¶”ê°€
        with open(self.gt_jsonl, 'a', encoding='utf-8') as f:
            for result in results:
                if result['file_path'] not in existing_paths:
                    f.write(json.dumps(result, ensure_ascii=False) + '\n')
    
    def move_images(self, image_paths: list[str]):
        """ì²˜ë¦¬ëœ ì´ë¯¸ì§€ë¥¼ gt/img_gtë¡œ ì´ë™"""
        for img_path in image_paths:
            src = Path(img_path)
            dst = self.img_gt_dir / src.name
            
            if not dst.exists():
                shutil.move(str(src), str(dst))
    
    def get_existing_paths(self) -> set:
        """ê¸°ì¡´ JSONLì— ìˆëŠ” íŒŒì¼ ê²½ë¡œ ì¡°íšŒ"""
        paths = set()
        if self.gt_jsonl.exists():
            with open(self.gt_jsonl, 'r', encoding='utf-8') as f:
                for line in f:
                    data = json.loads(line)
                    paths.add(data['file_path'])
        return paths
```

### 4. FastAPI Server

```python
# backend/api/main.py

from fastapi import FastAPI, Query
from fastapi.middleware.cors import CORSMiddleware
from typing import Optional

app = FastAPI(title="Accessibility Analysis API")

# CORS ì„¤ì •
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

@app.get("/api/statistics")
async def get_statistics():
    """ì „ì²´ í†µê³„"""
    data = load_gt_data()
    
    return {
        "total_images": len(data),
        "has_step": {
            "true": sum(1 for d in data if d['has_step']),
            "false": sum(1 for d in data if not d['has_step'])
        },
        "width_class": calculate_width_distribution(data),
        "chair_types": calculate_chair_distribution(data),
        "accessibility_score": calculate_avg_accessibility_score(data)
    }

@app.get("/api/images")
async def get_images(
    has_step: Optional[bool] = None,
    width_class: Optional[str] = None,
    skip: int = 0,
    limit: int = 20
):
    """ì´ë¯¸ì§€ ëª©ë¡ ì¡°íšŒ (í•„í„°ë§)"""
    data = load_gt_data()
    
    # í•„í„° ì ìš©
    if has_step is not None:
        data = [d for d in data if d['has_step'] == has_step]
    if width_class:
        data = [d for d in data if width_class in d['width_class']]
    
    # í˜ì´ì§€ë„¤ì´ì…˜
    total = len(data)
    data = data[skip:skip+limit]
    
    return {
        "total": total,
        "items": data,
        "skip": skip,
        "limit": limit
    }

@app.post("/api/analyze")
async def trigger_analysis(batch_id: str):
    """ìˆ˜ë™ ë°°ì¹˜ ë¶„ì„ íŠ¸ë¦¬ê±°"""
    # ë°°ì¹˜ ì²˜ë¦¬ ì‹œì‘
    processor = BatchProcessor()
    result = processor.process_batch(f"data/spider/{batch_id}")
    
    return {"status": "success", "processed": len(result)}
```

---

## ê¸°ìˆ  ìŠ¤íƒ

### Backend

| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| Python | 3.10+ | ë©”ì¸ ì–¸ì–´ |
| OpenAI SDK | 1.0+ | GPT-4 Vision API |
| FastAPI | 0.104+ | REST API ì„œë²„ |
| Pydantic | 2.0+ | ë°ì´í„° ê²€ì¦ |
| Watchdog | 3.0+ | íŒŒì¼ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ |
| Pillow | 10.0+ | ì´ë¯¸ì§€ ì „ì²˜ë¦¬ |
| python-dotenv | 1.0+ | í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ |

### Frontend

| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| Next.js | 14+ | React í”„ë ˆì„ì›Œí¬ |
| TypeScript | 5.0+ | íƒ€ì… ì•ˆì •ì„± |
| Tailwind CSS | 3.3+ | ìŠ¤íƒ€ì¼ë§ |
| Recharts | 2.9+ | ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| SWR | 2.2+ | ë°ì´í„° í˜ì¹­ |
| Axios | 1.6+ | HTTP í´ë¼ì´ì–¸íŠ¸ |

### Optional (ê³ ê¸‰ ê¸°ëŠ¥)

| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| Redis | ìºì‹±, í |
| Celery | ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬ |
| PostgreSQL | ê³ ê¸‰ ì¿¼ë¦¬ (í†µê³„, ê²€ìƒ‰) |
| Docker | ì»¨í…Œì´ë„ˆí™” |
| Nginx | ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ |

---

## êµ¬í˜„ ê³„íš

### Phase 1: ì½”ì–´ ë¶„ì„ ì—”ì§„ (1-2ì£¼)

**ëª©í‘œ:** GPT Visionì„ í™œìš©í•œ ê¸°ë³¸ ë¶„ì„ ê¸°ëŠ¥ êµ¬í˜„

- [ ] í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ì •
  - [ ] `backend/` í´ë” êµ¬ì¡° ìƒì„±
  - [ ] `requirements.txt` ì‘ì„±
  - [ ] `.env.example` ìƒì„±
  
- [ ] GPT Vision Analyzer
  - [ ] í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì‘ì„± ë° í…ŒìŠ¤íŠ¸
  - [ ] `gpt_vision.py` êµ¬í˜„
  - [ ] ì´ë¯¸ì§€ ì „ì²˜ë¦¬ í•¨ìˆ˜
  - [ ] ì‘ë‹µ ê²€ì¦ ë¡œì§
  
- [ ] Batch Processor
  - [ ] ë°°ì¹˜ ìŠ¤ìº” í•¨ìˆ˜
  - [ ] ë‹¨ì¼ ì´ë¯¸ì§€ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
  - [ ] ì—ëŸ¬ í•¸ë“¤ë§
  
- [ ] Data Manager
  - [ ] JSONL ì½ê¸°/ì“°ê¸°
  - [ ] ì¤‘ë³µ ì²´í¬
  - [ ] ì´ë¯¸ì§€ íŒŒì¼ ì´ë™

**í…ŒìŠ¤íŠ¸:**
```bash
python scripts/test_analyzer.py --image data/spider/batch_00/20240406121216_photo1_96fe98eaa714.webp
```

### Phase 2: ìë™í™” ì‹œìŠ¤í…œ (1ì£¼)

**ëª©í‘œ:** ë°°ì¹˜ ìë™ ì²˜ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•

- [ ] File Watcher
  - [ ] Watchdog ì„¤ì •
  - [ ] ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ êµ¬í˜„
  - [ ] ë°°ì¹˜ í ê´€ë¦¬
  
- [ ] ìë™ ë°°ì¹˜ ì²˜ë¦¬
  - [ ] ë°±ê·¸ë¼ìš´ë“œ í”„ë¡œì„¸ìŠ¤
  - [ ] ì§„í–‰ë¥  ì¶”ì 
  - [ ] ì™„ë£Œ/ì‹¤íŒ¨ ì•Œë¦¼
  
- [ ] ë¡œê¹… ì‹œìŠ¤í…œ
  - [ ] êµ¬ì¡°í™”ëœ ë¡œê·¸
  - [ ] ë¡œê·¸ íŒŒì¼ ê´€ë¦¬
  - [ ] ì—ëŸ¬ ì¶”ì 

**í…ŒìŠ¤íŠ¸:**
```bash
# Watcher ì‹¤í–‰
python backend/processor/file_watcher.py

# ìƒˆ ë°°ì¹˜ í´ë” ìƒì„± (ìë™ ì²˜ë¦¬ í™•ì¸)
mkdir data/spider/batch_test
cp test_images/* data/spider/batch_test/
```

### Phase 3: API ì„œë²„ (1ì£¼)

**ëª©í‘œ:** FastAPI ê¸°ë°˜ REST API êµ¬ì¶•

- [ ] FastAPI ì•± ì„¤ì •
  - [ ] í”„ë¡œì íŠ¸ êµ¬ì¡°
  - [ ] CORS ì„¤ì •
  - [ ] í™˜ê²½ ë³€ìˆ˜
  
- [ ] API ì—”ë“œí¬ì¸íŠ¸
  - [ ] `/api/statistics` - í†µê³„
  - [ ] `/api/batches` - ë°°ì¹˜ ëª©ë¡
  - [ ] `/api/images` - ì´ë¯¸ì§€ ì¡°íšŒ
  - [ ] `/api/analyze` - ìˆ˜ë™ ë¶„ì„
  
- [ ] Pydantic ëª¨ë¸
  - [ ] Request/Response ìŠ¤í‚¤ë§ˆ
  - [ ] ë°ì´í„° ê²€ì¦

**í…ŒìŠ¤íŠ¸:**
```bash
uvicorn backend.api.main:app --reload
curl http://localhost:8000/api/statistics
```

### Phase 4: ëŒ€ì‹œë³´ë“œ UI (2ì£¼)

**ëª©í‘œ:** Next.js ê¸°ë°˜ ì‹œê°í™” ëŒ€ì‹œë³´ë“œ

- [ ] Next.js í”„ë¡œì íŠ¸ ì„¤ì •
  - [ ] TypeScript ì„¤ì •
  - [ ] Tailwind CSS ì„¤ì •
  - [ ] í´ë” êµ¬ì¡°
  
- [ ] ì»´í¬ë„ŒíŠ¸ ê°œë°œ
  - [ ] Dashboard ë©”ì¸ í˜ì´ì§€
  - [ ] í†µê³„ ì¹´ë“œ
  - [ ] ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸ (Recharts)
  - [ ] ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬
  - [ ] í•„í„° UI
  
- [ ] API ì—°ë™
  - [ ] API í´ë¼ì´ì–¸íŠ¸ (Axios)
  - [ ] SWR ë°ì´í„° í˜ì¹­
  - [ ] ì—ëŸ¬ ì²˜ë¦¬
  
- [ ] ë°˜ì‘í˜• ë””ìì¸
  - [ ] ëª¨ë°”ì¼ ìµœì í™”
  - [ ] ë‹¤í¬ ëª¨ë“œ (ì„ íƒ)

### Phase 5: ê³ ê¸‰ ê¸°ëŠ¥ (1ì£¼)

**ëª©í‘œ:** ì ‘ê·¼ì„± ì ìˆ˜ ë° ë¦¬í¬íŠ¸ ê¸°ëŠ¥

- [ ] ì ‘ê·¼ì„± ì ìˆ˜ ì•Œê³ ë¦¬ì¦˜
  - [ ] ì ìˆ˜ ê³„ì‚° ë¡œì§
  - [ ] ë“±ê¸‰ ë¶„ë¥˜ (S/A/B/C/D)
  
- [ ] ê°œì„  ì‚¬í•­ ì¶”ì²œ
  - [ ] ê·œì¹™ ê¸°ë°˜ ì¶”ì²œ ì‹œìŠ¤í…œ
  - [ ] ìš°ì„ ìˆœìœ„ ê³„ì‚°
  
- [ ] ë¦¬í¬íŠ¸ ë‚´ë³´ë‚´ê¸°
  - [ ] CSV ìƒì„±
  - [ ] Excel ìƒì„± (openpyxl)
  - [ ] PDF ë¦¬í¬íŠ¸ (ì„ íƒ)

---

## ì‹œê°í™” ëŒ€ì‹œë³´ë“œ

### ë©”ì¸ ëŒ€ì‹œë³´ë“œ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š ì ‘ê·¼ì„± ë¶„ì„ ëŒ€ì‹œë³´ë“œ                                  â”‚
â”‚  ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-10-22 14:30                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¸ ì´ ë¶„ì„   â”‚  â”‚ âœ… ë‹¨ì°¨ ì—†ìŒ â”‚  â”‚ ğŸ“Š í‰ê·  ì ìˆ˜ â”‚  â”‚ ğŸ”„ ì²˜ë¦¬ì¤‘    â”‚
â”‚   108ì¥     â”‚  â”‚    65ì¥     â”‚  â”‚    78ì      â”‚  â”‚   batch_01  â”‚
â”‚             â”‚  â”‚   (60.2%)   â”‚  â”‚   (Bë“±ê¸‰)    â”‚  â”‚    2/3      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ˆ í†µë¡œ ë„ˆë¹„ ë¶„í¬                                         â”‚
â”‚                                                           â”‚
â”‚   Wide        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 48 (44.4%)        â”‚
â”‚   Normal      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 32 (29.6%)                â”‚
â”‚   Narrow      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 25 (23.1%)                    â”‚
â”‚   í†µê³¼ë¶ˆê°€     â–ˆâ–ˆ 3 (2.8%)                                 â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸª‘ ì˜ì íƒ€ì… ë¶„í¬ (ì¤‘ë³µ ê°€ëŠ¥)                              â”‚
â”‚                                                           â”‚
â”‚   ì´ë™í˜•       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 89 (82.4%)  â”‚
â”‚   ë†’ì´ ì¡°ì ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 31 (28.7%)                     â”‚
â”‚   ê³ ì •í˜•       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 42 (38.9%)                â”‚
â”‚   ë°”ë‹¥ ì¢Œì‹    â–ˆâ–ˆâ–ˆâ–ˆ 13 (12.0%)                            â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ ë°°ì¹˜ ì²˜ë¦¬ í˜„í™©                                          â”‚
â”‚                                                           â”‚
â”‚  batch_00   âœ… ì™„ë£Œ (5/5)    2025-10-20 10:30            â”‚
â”‚  batch_01   â³ ì²˜ë¦¬ì¤‘ (2/3)  2025-10-22 14:15            â”‚
â”‚  batch_02   â¸ï¸  ëŒ€ê¸°ì¤‘ (0/11)                             â”‚
â”‚  batch_03   â¸ï¸  ëŒ€ê¸°ì¤‘ (0/5)                              â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–¼ï¸  ìµœê·¼ ë¶„ì„ ì´ë¯¸ì§€                                      â”‚
â”‚                                                           â”‚
â”‚  [img] [img] [img] [img] [img] [img]                     â”‚
â”‚                                                           â”‚
â”‚  ğŸ” í•„í„°: â–¼ë‹¨ì°¨ ì—†ìŒ  â–¼Wide  â–¼ì´ë™í˜• ì˜ì                  â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì´ë¯¸ì§€ ìƒì„¸ í˜ì´ì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† ë’¤ë¡œê°€ê¸°                                               â”‚
â”‚                                                         â”‚
â”‚  ğŸ“· 20240406121216_photo1_96fe98eaa714.webp             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚  â”‚  ì ‘ê·¼ì„± ì •ë³´                 â”‚
â”‚                      â”‚  â”‚                             â”‚
â”‚   [ì´ë¯¸ì§€ í‘œì‹œ]       â”‚  â”‚  âœ… ë‹¨ì°¨: ì—†ìŒ               â”‚
â”‚                      â”‚  â”‚  ğŸ“ í†µë¡œ ë„ˆë¹„: Wide, Normal  â”‚
â”‚                      â”‚  â”‚  ğŸª‘ ì˜ì:                    â”‚
â”‚                      â”‚  â”‚     âœ“ ì´ë™í˜•                â”‚
â”‚                      â”‚  â”‚     âœ“ ë†’ì´ ì¡°ì ˆ             â”‚
â”‚                      â”‚  â”‚                             â”‚
â”‚                      â”‚  â”‚  ğŸ“Š ì ‘ê·¼ì„± ì ìˆ˜: 85/100 (A)  â”‚
â”‚                      â”‚  â”‚                             â”‚
â”‚                      â”‚  â”‚  ğŸ’¡ ê°œì„  ì‚¬í•­:               â”‚
â”‚                      â”‚  â”‚  - ì—†ìŒ (ìš°ìˆ˜í•¨)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ê³ ê¸‰ ê¸°ëŠ¥

### 1. ì ‘ê·¼ì„± ì ìˆ˜ ê³„ì‚°

```python
def calculate_accessibility_score(data: dict) -> dict:
    """
    ì ‘ê·¼ì„± ì ìˆ˜ ê³„ì‚° (0-100ì )
    
    í‰ê°€ í•­ëª©:
    - ë‹¨ì°¨: 30ì 
    - í†µë¡œ ë„ˆë¹„: 40ì 
    - ì˜ì: 20ì 
    - ì¶”ê°€ ìš”ì†Œ: 10ì 
    """
    score = 100
    details = []
    
    # 1. ë‹¨ì°¨ í‰ê°€ (-30ì )
    if data['has_step']:
        score -= 30
        details.append({
            "category": "ë‹¨ì°¨",
            "impact": -30,
            "reason": "íœ ì²´ì–´ ì§„ì… ì–´ë ¤ì›€"
        })
    
    # 2. í†µë¡œ ë„ˆë¹„ í‰ê°€ (0-40ì )
    width_score = 0
    if 'wide' in data['width_class']:
        width_score = 40
    elif 'normal' in data['width_class']:
        width_score = 30
    elif 'narrow' in data['width_class']:
        width_score = 15
    elif 'not_passable' in data['width_class']:
        width_score = 0
        details.append({
            "category": "í†µë¡œ",
            "impact": -40,
            "reason": "íœ ì²´ì–´ í†µê³¼ ë¶ˆê°€ëŠ¥"
        })
    
    score = score - 40 + width_score
    
    # 3. ì˜ì í‰ê°€ (0-20ì )
    chair_score = 0
    if data['chair']['has_movable_chair']:
        chair_score += 10
    if data['chair']['has_high_movable_chair']:
        chair_score += 5
    if not data['chair']['has_fixed_chair']:
        chair_score += 5  # ê³ ì •í˜• ì—†ìœ¼ë©´ ë³´ë„ˆìŠ¤
    
    score = score - 20 + chair_score
    
    # ë“±ê¸‰ ê³„ì‚°
    if score >= 90:
        grade = 'S'
    elif score >= 80:
        grade = 'A'
    elif score >= 70:
        grade = 'B'
    elif score >= 60:
        grade = 'C'
    else:
        grade = 'D'
    
    return {
        "score": max(0, min(100, score)),
        "grade": grade,
        "details": details
    }
```

### 2. ê°œì„  ì‚¬í•­ ì¶”ì²œ ì‹œìŠ¤í…œ

```python
def generate_recommendations(data: dict) -> list[dict]:
    """ì ‘ê·¼ì„± ê°œì„  ì‚¬í•­ ì¶”ì²œ"""
    recommendations = []
    
    # ë‹¨ì°¨ ê´€ë ¨
    if data['has_step']:
        recommendations.append({
            "priority": "high",
            "category": "ë‹¨ì°¨",
            "title": "ê²½ì‚¬ë¡œ ì„¤ì¹˜ ê¶Œì¥",
            "description": "íœ ì²´ì–´ ì‚¬ìš©ìë¥¼ ìœ„í•œ ê²½ì‚¬ë¡œ ì„¤ì¹˜ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. (ê²½ì‚¬ë„ 1:12 ì´í•˜)",
            "estimated_cost": "ì¤‘",
            "impact": "ë§¤ìš° ë†’ìŒ"
        })
    
    # í†µë¡œ ë„ˆë¹„ ê´€ë ¨
    if 'narrow' in data['width_class'] or 'not_passable' in data['width_class']:
        recommendations.append({
            "priority": "high",
            "category": "í†µë¡œ",
            "title": "í†µë¡œ í™•ì¥ í•„ìš”",
            "description": "ìµœì†Œ 0.9m ì´ìƒì˜ í†µë¡œ ë„ˆë¹„ í™•ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
            "estimated_cost": "ê³ ",
            "impact": "ë†’ìŒ"
        })
    
    # ì˜ì ê´€ë ¨
    if not data['chair']['has_movable_chair']:
        recommendations.append({
            "priority": "medium",
            "category": "ì˜ì",
            "title": "ì´ë™ ê°€ëŠ¥í•œ ì˜ì ë°°ì¹˜ ê¶Œì¥",
            "description": "ë‹¤ì–‘í•œ ì‹ ì²´ ì¡°ê±´ì˜ ê³ ê°ì„ ìœ„í•´ ì´ë™ ê°€ëŠ¥í•œ ì˜ìë¥¼ ë°°ì¹˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.",
            "estimated_cost": "ì €",
            "impact": "ì¤‘ê°„"
        })
    
    if data['chair']['has_floor_chair'] and not data['chair']['has_movable_chair']:
        recommendations.append({
            "priority": "medium",
            "category": "ì˜ì",
            "title": "ì¼ë°˜ í…Œì´ë¸” ì¢Œì„ ì¶”ê°€ ê¶Œì¥",
            "description": "ì¢Œì‹ë§Œ ìˆëŠ” ê²½ìš° ê±°ë™ì´ ë¶ˆí¸í•œ ê³ ê°ì˜ ì´ìš©ì´ ì–´ë µìŠµë‹ˆë‹¤.",
            "estimated_cost": "ì¤‘",
            "impact": "ë†’ìŒ"
        })
    
    # ìš°ì„ ìˆœìœ„ ì •ë ¬
    priority_order = {"high": 0, "medium": 1, "low": 2}
    recommendations.sort(key=lambda x: priority_order[x["priority"]])
    
    return recommendations
```

### 3. ë¦¬í¬íŠ¸ ë‚´ë³´ë‚´ê¸°

```python
# backend/api/routes/export.py

import pandas as pd
from fastapi.responses import StreamingResponse
import io

@app.get("/api/export/csv")
async def export_csv():
    """CSV ë¦¬í¬íŠ¸ ë‚´ë³´ë‚´ê¸°"""
    data = load_gt_data()
    
    # DataFrame ìƒì„±
    rows = []
    for item in data:
        row = {
            "íŒŒì¼ëª…": item["file_path"],
            "ë‹¨ì°¨": "ìˆìŒ" if item["has_step"] else "ì—†ìŒ",
            "í†µë¡œë„ˆë¹„": ", ".join(item["width_class"]),
            "ì´ë™í˜•ì˜ì": "O" if item["chair"]["has_movable_chair"] else "X",
            "ê³ ì •í˜•ì˜ì": "O" if item["chair"]["has_fixed_chair"] else "X",
            "ì ‘ê·¼ì„±ì ìˆ˜": calculate_accessibility_score(item)["score"],
            "ë“±ê¸‰": calculate_accessibility_score(item)["grade"]
        }
        rows.append(row)
    
    df = pd.DataFrame(rows)
    
    # CSV ìƒì„±
    stream = io.StringIO()
    df.to_csv(stream, index=False, encoding='utf-8-sig')
    
    response = StreamingResponse(
        iter([stream.getvalue()]),
        media_type="text/csv",
        headers={
            "Content-Disposition": "attachment; filename=accessibility_report.csv"
        }
    )
    
    return response
```

---

## ë³´ì•ˆ ë° ìµœì í™”

### API í‚¤ ê´€ë¦¬
```python
# .env
OPENAI_API_KEY=sk-...
```

### ì´ë¯¸ì§€ ìµœì í™”
```python
from PIL import Image

def optimize_image(image_path: str, max_size: int = 1024) -> str:
    """ì´ë¯¸ì§€ í¬ê¸° ìµœì í™”"""
    img = Image.open(image_path)
    
    # ë¹„ìœ¨ ìœ ì§€í•˜ë©° ë¦¬ì‚¬ì´ì§•
    img.thumbnail((max_size, max_size), Image.Resampling.LANCZOS)
    
    # ì„ì‹œ íŒŒì¼ë¡œ ì €ì¥
    optimized_path = f"/tmp/{Path(image_path).name}"
    img.save(optimized_path, quality=85, optimize=True)
    
    return optimized_path
```

### ìºì‹±
```python
from functools import lru_cache

@lru_cache(maxsize=128)
def get_statistics():
    """í†µê³„ ìºì‹± (1ë¶„)"""
    # ê³„ì‚° ë¹„ìš©ì´ ë†’ì€ í†µê³„ ìºì‹±
    pass
```

---

## ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

```python
# backend/utils/logger.py

import logging
from logging.handlers import RotatingFileHandler

def setup_logger(name: str):
    logger = logging.getLogger(name)
    logger.setLevel(logging.INFO)
    
    # íŒŒì¼ í•¸ë“¤ëŸ¬ (ìµœëŒ€ 10MB, 5ê°œ ë°±ì—…)
    file_handler = RotatingFileHandler(
        'logs/app.log',
        maxBytes=10*1024*1024,
        backupCount=5
    )
    file_handler.setFormatter(logging.Formatter(
        '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    ))
    
    logger.addHandler(file_handler)
    
    return logger
```

---

## ë‹¤ìŒ ë‹¨ê³„

1. **ì¦‰ì‹œ ì‹œì‘ ê°€ëŠ¥í•œ ì‘ì—…:**
   - [ ] `requirements.txt` ì‘ì„±
   - [ ] `.env.example` ìƒì„±
   - [ ] GPT Vision í”„ë¡¬í”„íŠ¸ í…ŒìŠ¤íŠ¸

2. **ë‹¨ê¸° ëª©í‘œ (1ì£¼):**
   - [ ] Phase 1 ì™„ë£Œ (ì½”ì–´ ì—”ì§„)
   - [ ] ìƒ˜í”Œ ì´ë¯¸ì§€ë¡œ í…ŒìŠ¤íŠ¸

3. **ì¤‘ê¸° ëª©í‘œ (1ê°œì›”):**
   - [ ] Phase 1-3 ì™„ë£Œ
   - [ ] API ì„œë²„ ë°°í¬

4. **ì¥ê¸° ëª©í‘œ (2ê°œì›”):**
   - [ ] ì „ì²´ ì‹œìŠ¤í…œ ì™„ì„±
   - [ ] í”„ë¡œë•ì…˜ ë°°í¬

---

**ë¬¸ì„œ ì‘ì„±ì¼**: 2025-10-22  
**ë²„ì „**: 1.0  
**ì‘ì„±ì**: AI Assistant

